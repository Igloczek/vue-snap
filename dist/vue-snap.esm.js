import{elementScrollByPolyfill as e}from"seamless-scroll-polyfill/dist/esm/Element.scrollBy";import"core-js/modules/es.array.every";import"core-js/modules/es.array.find-index";import"core-js/modules/es.array.map";import{ref as r,watch as t,onMounted as n,onBeforeUnmount as o,openBlock as l,createBlock as a,resolveDynamicComponent as u,withCtx as i,createCommentVNode as s,renderSlot as f,withDirectives as d,createVNode as c,vShow as v}from"vue";import p from"lodash/debounce";var m=function(e,r,t){return Math.abs(e-r)<=t},b="undefined"==typeof window,h=!b;function y(e){return function(e){if(Array.isArray(e))return g(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,r){if(!e)return;if("string"==typeof e)return g(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);"Object"===t&&e.constructor&&(t=e.constructor.name);if("Map"===t||"Set"===t)return Array.from(e);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return g(e,r)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function g(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=new Array(r);t<r;t++)n[t]=e[t];return n}b||"scrollBehavior"in document.documentElement.style||e();var w={name:"Carousel",props:{hideArrows:{type:Boolean,default:!1},hideArrowsOnBound:{type:Boolean,default:!1},tag:{type:String,default:"ul"},i18n:{type:Object,default:function(){return{slideLeft:"Slide left",slideRight:"Slide right"}},validator:function(e){return["slideLeft","slideRight"].every((function(r){return r in e}))}}},setup:function(e,l){var a=this,u=l.emit,i=r(null),s=r(!0),f=r(!1),d=r([]),c=r(0),v=r(0),b=r(0),g=r(0),w=r(0),S=r(null),_=r(null);t(b,(function(e,r){e!==r&&u("page",{current:e,previous:r})}));var L=function(){var e=m(g.value,0,5),r=m(c.value-v.value,g.value,5);e?(u("bound-left",!0),s.value=!0):s.value=!1,r?(u("bound-right",!0),f.value=!0):f.value=!1},A=function(){var e=d.value.findIndex((function(e){return m(e.offsetLeft,g.value,5)}));-1!==e&&-2!==e&&(b.value=e||0)},j=function(){g.value=i.value.scrollLeft||0},B=function(){var e,r;i.value&&(c.value=i.value.scrollWidth,v.value=i.value.offsetWidth,e=y(a.$refs.vsWrapper.children),d.value=e.map((function(e){return{offsetLeft:e.offsetLeft,width:e.offsetWidth}})),j(),A(),L(),r=c.value-v.value,w.value=d.value.findIndex((function(e){return e.offsetLeft>r}))-1)},C=function(){i.value&&(j(),A(),L())};return n((function(){B(),h&&(_.value=p(C,100),S.value=p(B,410),i.value.addEventListener("scroll",_.value),window.addEventListener("resize",S.value))})),o((function(){h&&(i.value.removeEventListener("scroll",_.value),window.removeEventListener("resize",S.value))})),{boundLeft:s,boundRight:f,changeSlide:function(e){var r=function(e){var r=e>0?b.value:b.value+e,t=d.value[r].width||0;if(t)return t*e}(e);r&&i.value.scrollBy({left:r,behavior:"smooth"})},vsWrapper:i}}};const S={class:"vs-carousel"};w.render=function(e,r,t,n,o,p){return l(),a("div",S,[(l(),a(u(e.tag),{ref:"vsWrapper",class:"vs-carousel__wrapper"},{default:i((()=>[s(" @slot Slot for Slides "),f(e.$slots,"default")])),_:3},512)),s(" @slot Slot for Arrows "),e.hideArrows?s("v-if",!0):f(e.$slots,"arrows",{key:0},(()=>[e.hideArrowsOnBound&&n.boundLeft?s("v-if",!0):(l(),a("button",{key:0,type:"button","aria-label":e.i18n.slideLeft,disabled:n.boundLeft,class:"\n          vs-carousel__arrows\n          vs-carousel__arrows--left\n        ",onClick:r[1]||(r[1]=e=>n.changeSlide(-1))}," ← ",8,["aria-label","disabled"])),d(c("button",{type:"button","aria-label":e.i18n.slideRight,disabled:n.boundRight,class:"\n          vs-carousel__arrows\n          vs-carousel__arrows--right\n        ",onClick:r[2]||(r[2]=e=>n.changeSlide(1))}," → ",8,["aria-label","disabled"]),[[v,!e.hideArrowsOnBound||!n.boundRight]])]))])},w.__file="src/components/Carousel/Carousel.vue";var _={name:"Slide",props:{tag:{type:String,default:"li"}}};_.render=function(e,r,t,n,o,s){return l(),a(u(t.tag),{ref:"vsSlide",class:"vs-carousel__slide",tabindex:"0"},{default:i((()=>[f(e.$slots,"default")])),_:3},512)},_.__file="src/components/Slide/Slide.vue";var L={install:function(e){e.component("carousel",w),e.component("slide",_)}};export default L;export{w as Carousel,_ as Slide};
